{"code":"(()=>{\nvar __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __hasOwnProp=Object.prototype.hasOwnProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:true})};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from===\"object\"||typeof from===\"function\"){for(let key of __getOwnPropNames(from))if(!__hasOwnProp.call(to,key)&&key!==except)__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable})}return to};var __toCommonJS=mod=>__copyProps(__defProp({},\"__esModule\",{value:true}),mod);var database_exports={};__export(database_exports,{deleteItem:()=>deleteItem,getByEmail:()=>getByEmail,getByField:()=>getByField,postItem:()=>postItem});module.exports=__toCommonJS(database_exports);var import_client_dynamodb=require(\"@aws-sdk/client-dynamodb\");var import_lib_dynamodb=require(\"@aws-sdk/lib-dynamodb\");const dynamoDbClient=process.env.ENDPOINT!==\"\"?new import_client_dynamodb.DynamoDBClient({region:process.env.REGION,endpoint:process.env.ENDPOINT}):new import_client_dynamodb.DynamoDBClient({region:process.env.REGION});const getByEmail=__name(async(tableName,email)=>{const dynamoDBDocumentClient=import_lib_dynamodb.DynamoDBDocumentClient.from(dynamoDbClient);const input={TableName:tableName,Key:{email}};try{const getCommandOutput=await dynamoDBDocumentClient.send(new import_lib_dynamodb.GetCommand(input));return getCommandOutput.Item}catch(err){console.error(\"DynamoDb getByEmail\",err);return Promise.reject()}},\"getByEmail\");const getByField=__name(async(tableName,fieldName,fieldValue)=>{const dynamoDBDocumentClient=import_lib_dynamodb.DynamoDBDocumentClient.from(dynamoDbClient);const input={TableName:tableName,FilterExpression:`${fieldName} = :field`,ExpressionAttributeValues:{\":field\":fieldValue}};try{return await dynamoDBDocumentClient.send(new import_lib_dynamodb.ScanCommand(input))}catch(err){console.error(err);return Promise.reject(null)}},\"getByField\");const postItem=__name(async(tableName,itemToPost)=>{const dynamoDBDocumentClient=import_lib_dynamodb.DynamoDBDocumentClient.from(dynamoDbClient);const input={TableName:tableName,Item:itemToPost};try{return await dynamoDBDocumentClient.send(new import_lib_dynamodb.PutCommand(input))}catch(err){console.log(\"Error message of dynamoDB\");console.error(err);return Promise.reject(null)}},\"postItem\");const deleteItem=__name(async(tableName,itemId,sortKey)=>{const dynamoDBDocumentClient=import_lib_dynamodb.DynamoDBDocumentClient.from(dynamoDbClient);const input={Key:{id:{itemId},email:{sortKey}},TableName:tableName};try{await dynamoDBDocumentClient.send(new import_lib_dynamodb.DeleteCommand(input))}catch(err){console.error(err);return Promise.reject(null)}},\"deleteItem\");0&&(module.exports={deleteItem,getByEmail,getByField,postItem});\n})()\n","warnings":[],"map":{"version":3,"mappings":";suBAAA,kOAA+B,oCAC/B,wBAaO,iCAEP,MAAM,eAAiB,QAAQ,IAAI,WAAa,GAAK,IAAI,sCAAe,CAAE,OAAQ,QAAQ,IAAI,OAAQ,SAAU,QAAQ,IAAI,QAAS,CAAC,EAChI,IAAI,sCAAe,CAAE,OAAQ,QAAQ,IAAI,MAAO,CAAC,EAEhD,MAAM,WAAa,aAAU,UAAmB,QAA0C,CAC7F,MAAM,uBAAyB,2CAAuB,KAAK,cAAc,EAEzE,MAAM,MAAyB,CAC3B,UAAW,UACX,IAAK,CAAE,KAAa,CACxB,EAEA,GAAI,CACA,MAAM,iBAAoB,MAAM,uBAAuB,KACnD,IAAI,+BAAW,KAAK,CACxB,EAEA,OAAO,iBAAiB,IAC5B,OAAS,IAAK,CACV,QAAQ,MAAM,sBAAuB,GAAG,EACxC,OAAO,QAAQ,OAAO,CAC1B,CACJ,EAlB0B,cAoBnB,MAAM,WAAa,aAAO,UAAmB,UAAmB,aAAmD,CACtH,MAAM,uBAAyB,2CAAuB,KAAK,cAAc,EAEzE,MAAM,MAA0B,CAC5B,UAAW,UACX,iBAAkB,GAAG,SAAS,YAC9B,0BAA2B,CAAE,SAAU,UAAW,CACtD,EAEA,GAAI,CACA,OAAO,MAAM,uBAAuB,KAAK,IAAI,gCAAY,KAAK,CAAC,CACnE,OAAS,IAAK,CACV,QAAQ,MAAM,GAAG,EACjB,OAAO,QAAQ,OAAO,IAAI,CAC9B,CACJ,EAf0B,cAiBnB,MAAM,SAAW,aAAO,UAAmB,aAAkD,CAChG,MAAM,uBAAyB,2CAAuB,KAAK,cAAc,EAEzE,MAAM,MAAyB,CAC3B,UAAW,UACX,KAAM,UACV,EAEA,GAAI,CACA,OAAO,MAAM,uBAAuB,KAAK,IAAI,+BAAW,KAAK,CAAC,CAClE,OAAS,IAAK,CACV,QAAQ,IAAI,2BAA2B,EACvC,QAAQ,MAAM,GAAG,EACjB,OAAO,QAAQ,OAAO,IAAI,CAC9B,CACJ,EAfwB,YAiBjB,MAAM,WAAa,aAAO,UAAmB,OAAgB,UAAmC,CACnG,MAAM,uBAAyB,2CAAuB,KAAK,cAAc,EAEzE,MAAM,MAA4B,CAC9B,IAAK,CACD,GAAI,CAAE,MAAO,EACb,MAAO,CAAE,OAAQ,CACrB,EACA,UAAW,SACf,EAEA,GAAI,CACA,MAAM,uBAAuB,KAAK,IAAI,kCAAc,KAAK,CAAC,CAC9D,OAAS,IAAK,CACV,QAAQ,MAAM,GAAG,EACjB,OAAO,QAAQ,OAAO,IAAI,CAC9B,CACJ,EAjB0B","names":[],"ignoreList":[],"sources":["C:\\Users\\Namai\\Projects\\spending-tracker\\server\\lib\\shared\\database.ts"],"sourcesContent":[null]}}